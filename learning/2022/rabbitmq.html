<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Yi-Hong's Blog</title>
        <link rel="icon" type="image/x-icon" href="https://yih-chen.github.io/images/yh.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="https://yih-chen.github.io/css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
            <a class="navbar-brand js-scroll-trigger" href="#page-top">
                <span class="d-block d-lg-none">Yi-Hong Chen</span>
                <span class="d-none d-lg-block"><img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="https://yih-chen.github.io/images/learn.jpg" alt="..." /></span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav">
<!--                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#about">About</a></li>-->
<!--                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#experience">Experience</a></li>-->
<!--                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#education">Education</a></li>-->
<!--                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#skills">Skills</a></li>-->
<!--                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#interests">Interests</a></li>-->
<!--                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#awards">Awards</a></li>-->
                </ul>
            </div>
        </nav>

        <div class="nav-bar">
            <div class="container">
                <div class="row">
                    <div class="col-9 col-lg-3">
                        <div class="site-branding">
                            <h1 class="site-title"><a href="https://yih-chen.github.io/index.html" rel="home"></a></h1>
                        </div><!-- .site-branding -->
                    </div><!-- .col -->

                    <div class="col-3 col-lg-9 flex justify-content-end align-content-center">
                        <nav class="site-navigation flex justify-content-end align-items-center">
                            <ul class="flex flex-column flex-lg-row justify-content-lg-end align-content-center">
                                <li><a href="https://yih-chen.github.io/index.html">首頁</a></li>
                                <li><a href="https://yih-chen.github.io/about.html">關於我</a></li>
                                <li class="current-menu-item"><a href="https://yih-chen.github.io/learning/learningindex.html">學習紀錄</a></li>
                                <li><a href="https://yih-chen.github.io/life/index.html">生活紀錄</a></li>
                            </ul>

                            <div class="hamburger-menu d-lg-none">
                                <span></span>
                                <span></span>
                                <span></span>
                                <span></span>
                            </div><!-- .hamburger-menu -->

                            <div class="header-bar-cart">
                                <a href="#" class="flex justify-content-center align-items-center"><span aria-hidden="true" class="icon_bag_alt"></span></a>
                            </div><!-- .header-bar-search -->
                        </nav><!-- .site-navigation -->
                    </div><!-- .col -->
                </div><!-- .row -->
            </div><!-- .container -->
        </div>

        <div class="container-fluid p-0 pr-150" >
            <!-- About-->
                <div class="resume-section-content" align="center">
                    <h2 class="mb-0">
                        RabbitMQ基本概念和安裝
                        <span class="text-primary"></span>
                    </h2>
                    <div class="subheading mb-5">
                        <span class="text-primary">2022-10-02</span>
                    </div>
                </div>

        </div>
        <hr class="m-0" />
        <div>
            <div align="center">
                <img src="https://yih-chen.github.io/images/rabbitmq.jpg" width="50%">
            </div>
            <div class="container-fluid p-0 pr-150 pr-320" style="width:55.589%;">

                <p></p>
                <h3>
                    <b>
                        基本概念
                    </b>
                </h3>

                <p class="lead">
                    RabbitMQ是一個開源的訊息代理軟體，其中包含了幾個重要的角色：
                </p>
                <p class="lead">
                    <b>
                        1.生產者（Producer）
                    </b><br>
                    即為訊息的產生者，會負責將訊息傳送至Queue中。
                </p>
                <p class="lead">
                    <b>
                        2.消費者（Consumer）
                    </b><br>
                    訊息的消費者，負責接收Queue中的訊息。
                </p>
                <p class="lead">
                    <b>
                        3.佇列（Queue）
                    </b><br>
                    負責存放訊息的空間，具有先進先出（FIFO）的概念。
                </p>
                <p class="lead">
                    <b>
                        4.交換機制（Exchange）
                    </b><br>
                    可以把Exchange當作路由器的概念，它可以決定Producer的訊息需要送往哪一個Queue。<br>
                    主要有四種模式：<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <b>
                        4-1. direct模式
                    </b>
                    ，可以直接將訊息丟給指定的Queue。<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <b>
                        4-2. topic模式
                    </b>
                    ，主題的概念，透過Binding規則，將訊息傳送給指定的Queue。<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <b>
                        4-3. header模式
                    </b>
                    ，藉由傳送資料的Header來指定訊息要送往的Queue。<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <b>
                        4-4. fanout模式
                    </b>
                    ，一次丟給全部負責的Queue。
                </p>
                <p class="lead">
                    <b>
                        5.綁定（Binding）
                    </b><br>
                    搭配Exchange使用，可以讓Exchange綁定一些指定的Queue，從而知道Producer的訊息要送往何處。
                </p>
                <p class="lead">
                    以下圖
                    <b>
                        郵寄的例子
                    </b>
                    來說明，或許會稍微貼切一些：
                </p>

                <img src="https://yih-chen.github.io/images/rabbitmq-process.png" width="110%">
                <p></p>
                <p class="lead mb-5">
                    日常生活中不免會遇到需要進行郵寄信件或包裹等業務，需要使用郵寄服務的寄件者會帶著包裹或信件至郵局進行投遞。
                    此時，郵局內部的人員可能會根據寄件者留下的
                    <b>
                        收件地址
                    </b>
                    （例如：收件地址位在中山區）將包裹或信件分派至該區域的郵局，最後透過分局將包裹或信件交付收件者。
                </p>

                <h3>
                    <b>
                        RabbitMQ運行的種類/模式
                    </b>
                </h3>

                <h5>
                    Simple模式
                </h5>
                <img src="https://yih-chen.github.io/images/r-direct.jpg" width="110%">
                <p></p>
                <p class="lead mb-5">
                    這是RabbitMQ中最簡單的模式，Producer,Consumer,Queue都只有一個。透過Producer直接將message傳進Queue中，最後由Consumer接收Queue中的訊息。
                </p>

                <h5>
                    Worker模式
                </h5>
                <img src="https://yih-chen.github.io/images/r-worker.jpg" width="110%">
                <p></p>
                <p class="lead">
                    由於Queue遵循先進先出演算法（FIFO）的概念，當Producer發送訊息的速度大於Consumer處理(消化)的速度時，這時simple模式如果被使用在
                    <b>
                        有時間限制的應用
                    </b>
                    上，就可會因為等待時間過長而導致任務失敗。<br>
                    相比Simple模式，Worker模式就能更有效的消化Queue中的訊息。Worker模式會有兩個以上的Consumer，同時從一個Queue中取出訊息，並且
                    <b>
                        兩者不會取出重複的訊息
                    </b>
                    。在默認情況下，RabbitMQ會以循環的方式，按照順序將訊息平均發送給每個Consumer。
                </p>
                <p class="lead mb-5">
                    <b>
                        以生活中的例子來說
                    </b>
                    ，就像是大賣場中的收銀台，此時只有一個櫃員提供結帳服務，當越來越多顧客在排隊等候結帳時，櫃員就需要花更多時間消化掉這些顧客，而顧客也需要花更久的時間進行等待。
                    這時候賣場如果能夠加開多個櫃台提供結帳服務，就能夠更快速的處理這些顧客的結帳需求。
                </p>

                <h5>
                    Publish/Subscribe模式
                </h5>
                <img src="https://yih-chen.github.io/images/r-publish-subscribe.jpg" width="110%">
                <p></p>
                <p class="lead mb-5">

                </p>

                <h5>
                    Routing模式
                </h5>
                <img src="https://yih-chen.github.io/images/r-routing.jpg" width="110%">
                <p></p>
                <p class="lead mb-5">

                </p>
                <img src="https://yih-chen.github.io/images/r-routing2.jpg" width="110%">
                <p></p>

                <h5>
                    Topics模式
                </h5>
                <img src="https://yih-chen.github.io/images/r-topics.jpg" width="110%">
                <p></p>
                <p class="lead mb-5">

                </p>

                <h5>
                    RPC模式
                </h5>
                <img src="https://yih-chen.github.io/images/r-rpc.jpg" width="110%">
                <p></p>
                <p class="lead mb-5">

                </p>


            </div>


        </div>


        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
