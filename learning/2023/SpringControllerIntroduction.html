<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
</html><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <title>Yi-Hong's Blog</title>
    <link rel="icon" type="image/x-icon" href="https://yih-chen.github.io/images/yh.ico"/>
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet"
          type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet" type="text/css"/>
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="https://yih-chen.github.io/css/styles.css" rel="stylesheet"/>
</head>
<body id="page-top">
<!-- Navigation-->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
    <a class="navbar-brand js-scroll-trigger" href="#page-top">
        <span class="d-block d-lg-none">Yi-Hong Chen</span>
        <span class="d-none d-lg-block"><img class="img-fluid img-profile rounded-circle mx-auto mb-2"
                                             src="https://yih-chen.github.io/images/learn.jpg" alt="..."/></span>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive"
            aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span
            class="navbar-toggler-icon"></span></button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav">
            <!--                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#about">About</a></li>-->
            <!--                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#experience">Experience</a></li>-->
            <!--                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#education">Education</a></li>-->
            <!--                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#skills">Skills</a></li>-->
            <!--                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#interests">Interests</a></li>-->
            <!--                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#awards">Awards</a></li>-->
        </ul>
    </div>
</nav>

<div class="nav-bar">
    <div class="container">
        <div class="row">
            <div class="col-9 col-lg-3">
                <div class="site-branding">
                    <h1 class="site-title"><a href="https://yih-chen.github.io/index.html" rel="home"></a></h1>
                </div><!-- .site-branding -->
            </div><!-- .col -->

            <div class="col-3 col-lg-9 flex justify-content-end align-content-center">
                <nav class="site-navigation flex justify-content-end align-items-center">
                    <ul class="flex flex-column flex-lg-row justify-content-lg-end align-content-center">
                        <li><a href="https://yih-chen.github.io/index.html">首頁</a></li>
                        <li><a href="https://yih-chen.github.io/about.html">關於我</a></li>
                        <li class="current-menu-item"><a href="https://yih-chen.github.io/learning/learningindex.html">學習紀錄</a>
                        </li>
                        <li><a href="https://yih-chen.github.io/life/index.html">生活紀錄</a></li>
                    </ul>

                    <div class="hamburger-menu d-lg-none">
                        <span></span>
                        <span></span>
                        <span></span>
                        <span></span>
                    </div><!-- .hamburger-menu -->

                    <div class="header-bar-cart">
                        <a href="#" class="flex justify-content-center align-items-center"><span aria-hidden="true"
                                                                                                 class="icon_bag_alt"></span></a>
                    </div><!-- .header-bar-search -->
                </nav><!-- .site-navigation -->
            </div><!-- .col -->
        </div><!-- .row -->
    </div><!-- .container -->
</div>

<div class="container-fluid p-0 pr-150">
    <!-- About-->
    <div class="resume-section-content" align="center">
        <h2 class="mb-0">
            SpringBoot-Controller介紹和實作
            <span class="text-primary"></span>
        </h2>
        <div class="subheading mb-5">
            <span class="text-primary">2023-06-12</span>
        </div>
    </div>

</div>
<hr class="m-0"/>
<div>
    <div align="center">
        <img src="https://yih-chen.github.io/images/spring-boot-logo.jpg">
    </div>
    <div class="container-fluid p-0 pr-150 pr-320" style="width:55.589%;">

        <p></p>
        <p class="lead">
            在Spring Boot中，Controller主要被用來處理Http發起的請求並且產生對應的回覆，以下將針對一些常被使用到的方法以及@Bean進行介紹和實作
        </p>

        <p class="lead"></p>

        <h3>
            在Controller中常被使用到的@Bean
        </h3>

        <p class="lead mb-5">
            <b>
                @RequestMapping
            </b>
            ，是一個可以使用在類別(Class)或類別內其他方法(Function)上的註解。如果將此註解用在類別上，
            它會將特定的請求映射到該Controller內，之後也可以在其他方法上添加該註解，
            用來進一步指定到處理該請求的方法內。
        </p>

        <p>
            同時於Class和Function使用@RequestMapping的範例如下：
        </p>

        <img src="https://yih-chen.github.io/images/spring-boot-controller-eg1.jpg" width="80%">
        <p class="lead"></p>

        <p class="lead mb-5">
            在@RequestMapping中包含了許多屬性，除了設定指定請求的路徑(value屬性)外，還有其他屬性可以指定，透過這些屬性的組合和設定，讓符合條件的訪問才能夠執行。<br>
            以下為@RequestMapping中可以設定的屬性：<br><br>
            <b>
                1.value：
            </b>
            定義發起請求的實際地址<br>
            <b>
                2.params：
            </b>
            定義發起的請求中必須
            <b>
                包含
            </b>
            哪些參數
            <b>
                或是不包含
            </b>
            哪些參數<br>
            <b>
                3.method：
            </b>
            在發起request時就會指定該請求的方法為何，在method屬性設定請求的類型，可以用於限制請求的方式。如果沒有設定method屬性，表示此mapping接受所有請求的方法。
            method屬性包括了GET, POST, HEAD, OPTIONS, PUT, PATCH, DELETE, TRACE等類型，而GET、POST則是在開發中較常被使用方法類型。<br>
            <b>
                4.consumes：
            </b>
            對應到Http Request Header的Content-Type，可以限制接受請求內容的類型，例如application/json, application/text, application//html等。<br>
            <b>
                5.produces：
            </b>對應到Http Request Header的Accept，指定回傳内容的類型。當請求Header中的(Accept)包含該指定類型才會返回，也代表cilent端能夠接收的類型。
        </p>

        <h3>
            實作範例
        </h3>
        <p class="lead">
            說明：<br>
            實作一個範例，在API的請求中帶入兩個參數A、B，而API回傳時返回A、B兩數的最大公因數。<br>
            在以下實作將建立一個Controller Class且於類別內定義指定的方法並搭配Postman發起API請求以及接收回傳內容。
        </p>

        <p class="lead">

            Step1.要想在程式內提供RESTful Web 服務，需先於類別上加入<b>@RestController</b>的註解。<br>
            Step2.承如先前的介紹，我們可以在類別上加上<b>@RequestMapping</b>的註解。<br>
            假設在Application內存在多個Controller，且在不同的Controller下會有多個接收請求的方法，而有些方法可能都在處理類似的請求，
            在此情況下如果設定了同個路徑名稱，就會違反了該路徑在全局的唯一性。此時，如果在類別上添加@RequestMapping的註解並且給予不同的父路徑，
            就可以很好的解決此問題的發生。<br>
            Step3.定義實作方法的名稱。<br>
            Step4.定義方法的路徑以及可接受的請求方法，這邊實作GET方法。<br>
            Step5.定義所接收的參數。<br>
            Step6.當收到請求後，將透過業務邏輯層<b>@Server</b>針對請求的資料進行處理。<br>
            Step7.最後返回業務邏輯層處理後的結果。<br>
            程式範例流程如下圖：<br>
        </p>

        <img src="https://yih-chen.github.io/images/spring-boot-Controller1.jpg" width="80%">

        <p class="lead">
            利用Postman發起GET請求以及API回傳結果如下圖：
        </p>

        <img src="https://yih-chen.github.io/images/spring-boot-ControllerResult1.jpg" width="80%">

        <p class="lead">

            因為所設計的API並不支援POST方法所以如果改用POST發起請求，會發生HTTP 405 的錯誤。<br>
            結果如下：

        </p>

        <img src="https://yih-chen.github.io/images/spring-boot-ControllerResult2.jpg" width="80%">

        <p class="lead mb-5">

            如果想要透過POST將請求送到此API，<b>method</b>屬性內加入接受的請求方法。

        </p>



    </div>
</div>


<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="js/scripts.js"></script>
</body>
</html>
